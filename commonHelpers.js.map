{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function getImages(userRequest) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n\n    const params = new URLSearchParams({\n        key: '43216617-d9e2d51a1f64026c97bc97c8e',\n        q: `${userRequest}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n    \n    const url = `${BASE_URL}${END_POINT}?${params}`;\n\n    return fetch(url).then(res => res.json()).catch(error => console.error(\"Error while fetching: \", error));\n    throw error;\n};\n \n\n","\nexport function imagesRender(array) { \n    return array.map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n    }) => { return `<li class = \"list-item\">\n  <a class = \"gallery-link\" href=\"${largeImageURL}\">\n    <img src = \"${webformatURL}\"  alt=\"${tags}\" class=\"gallery-image\">\n  </a>\n\n  <ul class = \"information-list\">\n\n    <li class=\"item-information-container\">\n      <h2 class=\"main-info\">Likes </h2>\n      <p class=\"info\">${likes}</p>\n    </li>\n\n    <li class=\"item-information-container\">\n      <h2 class=\"main-info\"> Views </h2>\n      <p class=\"info\">${views}</p>\n    </li>\n\n    <li class=\"item-information-container\">\n      <h2 class=\"main-info\">Comments </h2>\n      <p class=\"info\">${comments}</p>\n    </li>\n\n    <li class=\"item-information-container\">\n      <h2 class=\"main-info\">Downloads </h2>\n      <p class=\"info\">${downloads}</p>\n    </li>\n\n  </ul>\n\n</li>`}\n     \n\n    ).join('')\n}\n","// Описаний в документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { imagesRender } from  \"./js/render-functions\"\n\nconst userRequestForm = document.querySelector(\".user_request_form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loading = document.querySelector(\".loading\");\n\nuserRequestForm.addEventListener(\"submit\", onRequestSubmit);\n\nfunction onRequestSubmit(event) {\n  event.preventDefault();\n\n  loading.classList.add(\"loader\");\n\n  const userRequestStr = event.target.elements.user_query.value.toLowerCase().trim().replaceAll(\" \", \"+\");\n  if (!userRequestStr) {\n    iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"Please, input a valid request!\"\n    });\n    return;\n  }\n  else {\n    getImages(userRequestStr).then(data => {\n      if (!data.hits.length) {\n      iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"There are no images matching Your request!\"\n    });\n      }\n      else {\n      \n        gallery.innerHTML = imagesRender(data.hits);\n\n          const lightbox = new SimpleLightbox(\".gallery-link\", {\n          captionsData: \"alt\"\n        });\n        lightbox.refresh();\n      };\n    })\n      .catch(error => {\n      iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"Something went wrong during your request. Please, try again later!\"\n    });\n    })\n      .finally(()=>loading.classList.remove(\".loader\"))\n  };\n  // event.target.reset();\n};\n\n// getImages().then(images => {\n//   const markup = imagesTemplate(images);\n//   // container.innerHTML = markup;\n// })\n\n\n// const container = document.querySelector(\".gallery\");\n// container.insertAdjacentHTML(\"beforeend\", createMarkup(images));\n// function createMarkup(arr){ \n//     return arr.map(({ preview, original, description }) =>\n//      `<li class=\"gallery-item\">\n//   <a class=\"gallery-link\" href=${original}>\n//     <img\n//       class=\"gallery-image\"\n//       src=${preview}\n//       alt=\"${description}\"\n//     />\n//   </a>\n// </li>`)\n//         .join(\"\")\n// };\n\n\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});"],"names":["getImages","userRequest","BASE_URL","END_POINT","params","url","res","error","imagesRender","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","userRequestForm","gallery","loading","onRequestSubmit","event","userRequestStr","data","SimpleLightbox","iziToast"],"mappings":"6vBAAO,SAASA,EAAUC,EAAa,CACnC,MAAMC,EAAW,sBACXC,EAAY,QAEZC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAG,GAAGH,CAAW,GACjB,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAE7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,EAAE,MAAMC,GAAS,QAAQ,MAAM,yBAA0BA,CAAK,CAAC,CAE3G,CCfO,SAASC,EAAaC,EAAO,CAChC,OAAOA,EAAM,IAAI,CAAC,CACd,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,IAAc;AAAA,oCACiBL,CAAa;AAAA,kBAC/BD,CAAY,WAAWE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAOrBC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAQjC,EAAM,KAAK,EAAE,CACb,CC9BA,MAAMC,EAAkB,SAAS,cAAc,oBAAoB,EAC7DC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAEjDF,EAAgB,iBAAiB,SAAUG,CAAe,EAE1D,SAASA,EAAgBC,EAAO,CAC9BA,EAAM,eAAc,EAEpBF,EAAQ,UAAU,IAAI,QAAQ,EAE9B,MAAMG,EAAiBD,EAAM,OAAO,SAAS,WAAW,MAAM,YAAW,EAAG,KAAM,EAAC,WAAW,IAAK,GAAG,EACtG,GAAKC,EAYHtB,EAAUsB,CAAc,EAAE,KAAKC,GAAQ,CAChCA,EAAK,KAAK,QAYbL,EAAQ,UAAYV,EAAae,EAAK,IAAI,EAEvB,IAAIC,EAAe,gBAAiB,CACrD,aAAc,KACxB,CAAS,EACQ,QAAO,GAhBlBC,EAAS,MAAM,CACf,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,4CACf,CAAK,EAWA,EACE,MAAMlB,GAAS,CAChBkB,EAAS,MAAM,CACf,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,oEACf,CAAK,CACL,CAAK,EACE,QAAQ,IAAIN,EAAQ,UAAU,OAAO,SAAS,CAAC,MA3C/B,CACnBM,EAAS,MAAM,CACb,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,gCACf,CAAK,EACD,MACD,CAoCH,CA0BiB,IAAID,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC"}